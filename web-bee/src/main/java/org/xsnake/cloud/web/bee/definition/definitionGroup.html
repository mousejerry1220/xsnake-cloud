<@pui.body>
<div class="page-header">
	<h1>
		数据定义：
		<small>
			<i class="ace-icon fa fa-angle-double-right"></i>
			数据是一个系统的重要组成部分，也可以理解为表定义
		</small>
	</h1>
</div>
<div class="row" style="margin-top: 10px">
<div class="col-xs-12">
<!-- PAGE CONTENT BEGINS -->
								<form class="form-horizontal" id="form" role="form">
									<div class="form-group">
										<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 编码 ：</label>
										<div class="col-sm-10">
											<input type="text" id="code" name="code" placeholder="编码" class="col-sm-5" />
										</div>
									</div>

									<div class="form-group">
										<label class="col-sm-2 control-label no-padding-right" for="form-field-1-1"> 名称 ：</label>
										<div class="col-sm-10">
											<input type="text" id="name" name="name" placeholder="名称" class="col-sm-5" />
										</div>
									</div>

									<div class="form-group">
										<label class="col-sm-2 control-label no-padding-right" for="form-field-2"> 类型 ： </label>
										<div class="col-sm-10">
											<div class="radio col-sm-2" >
												<label class="dataType">
													<input name="form-field-radio" id="simple" checked="checked"  type="radio" class="ace">
													<span class="lbl"> 简单类型 </span>
												</label>
											</div>
											<div class="radio col-sm-2" >
												<label class="dataType">
													<input name="form-field-radio" id="master" type="radio" class="ace">
													<span class="lbl"> 主数据 </span>
												</label>
											</div>
											<div class="radio col-sm-2" >
												<label class="dataType">
													<input name="form-field-radio" id="slave" type="radio" class="ace">
													<span class="lbl"> 从数据 </span>
												</label>
											</div>
											<div class="radio col-sm-2" >
												<label class="dataType">
													<input name="form-field-radio" id="view" type="radio" class="ace">
													<span class="lbl"> 视图 </span>
												</label>
											</div>
										</div>
									</div>
									
									<script type="text/javascript">
										$(function($) {
											$(".dataType").click(function(e){
												var id = $(e.currentTarget).find("input")[0].id;
												var type = id+"Type";
												$(".typeView").addClass("hide");
												$("."+type).removeClass("hide");
// 												$("#grid-table").trigger("reloadGrid");
												$(window).triggerHandler('resize.jqGrid');
											})
										})
									</script>
									
									<div class="form-group simpleType typeView " >
										<label class="col-sm-2 control-label no-padding-right" > 结构  ： </label>
										<div class="col-sm-10">
											<div class="radio col-sm-2" >
												<label>
													<input name="treeFlag" id="parallel" checked="checked" value="N" type="radio" class="ace">
													<span class="lbl"> 平行 </span>
												</label>
											</div>
											<div class="radio col-sm-2" >
												<label>
													<input name="treeFlag" id="tree" value="Y" type="radio" class="ace">
													<span class="lbl"> 树形 </span>
												</label>
											</div>
										</div>
									</div>

									<div class="form-group masterType typeView hide">
										<label class="col-sm-2 control-label no-padding-right" for="permissionType">权限 ：</label>
										<div class="col-sm-10">
											<div class="permissionType">
												<input class="col-sm-5" readonly="readonly" type="text" id="permissionType" name="permissionType" placeholder="权限" />
												<button class="btn btn-sm btn-info " type="button" style="margin-left: -36px;margin-top: 1px;border-width: 3px;">
													<i class="ace-icon fa fa-reply icon-only"></i>
												</button>
											</div>
										</div>
									</div>
									
									<div class="form-group masterType typeView hide">
										<label class="col-sm-2 control-label no-padding-right" for="permissionTreeCode">权限树 ：</label>
										<div class="col-sm-10">
											<div class="permissionTreeCode">
												<input class="col-sm-5" readonly="readonly" type="text" id="permissionTreeCode" name="permissionTreeCode" placeholder="权限树" />
												<button class="btn btn-sm btn-info " type="button" style="margin-left: -36px;margin-top: 1px;border-width: 3px;">
													<i class="ace-icon fa fa-reply icon-only"></i>
												</button>
											</div>
										</div>
									</div>
									
									<div class="form-group masterType typeView hide">
									<div class="col-sm-12">
										<table id="grid-table"></table>
										<div id="grid-pager"></div>
										</div>
									</div>
									
									<div class="form-group slaveType typeView hide">
										<label class="col-sm-2 control-label no-padding-right" for="form-field-5">归属：</label>
										<div class="col-sm-10">
											<div class="headerGroupCode">
												<input class="col-sm-5" readonly="readonly" type="text" id="headerGroupCode" name="headerGroupCode" placeholder="归属" />
												<button class="btn btn-sm btn-info " type="button" style="margin-left: -36px;margin-top: 1px;border-width: 3px;">
													<i class="ace-icon fa fa-reply icon-only"></i>
												</button>
											</div>
										</div>
										
										<script type="text/javascript">
											$(function($) {
												$(".headerGroupCode").beeChoice({
													title:"标题",
													src:"select",
													callback:function(r){
														console.info(r);
														$("#headerGroupCode").val(r.name);
													},
													height:"300px",
													multiple:false,
													selectedList:[{id:'asd1'}]
												});
											})
										</script>
									</div>

									<div class="form-group viewType typeView hide">
										<label class="col-sm-2 control-label no-padding-right" for="form-field-1-1"> 视图名：</label>
										<div class="col-sm-10">
											<input type="text" id="tableName" name="tableName" placeholder="视图名" class="col-sm-5" />
										</div>
									</div>

									<div class="clearfix form-actions">
										<div class="col-md-offset-3 col-md-9">
											<button class="btn btn-info submit" type="button">
												<i class="ace-icon fa fa-check bigger-110"></i>
												Submit
											</button>

											&nbsp; &nbsp; &nbsp;
											<button class="btn" type="reset">
												<i class="ace-icon fa fa-undo bigger-110"></i>
												Reset
											</button>
										</div>
									</div>
								</form>
</div>
</div>

<script type="text/javascript">
	$('#form').beeSubmit({
		success:function(){
			window.location.href="main.html";
		}
	});
	
	var bg = new BeeGrid({
		caption:"数据结构定义",
		grid:"#grid-table",
		pager:"#grid-pager",
		data: [],
		multiselect: true,
        cellEdit:true,
		colModel:[
			{name:'id',label:'id', width:60, hidden:true,editable: false},
			{name:'code',label:'编码', width:150,editable: true,editoptions:{size:"20",maxlength:"30"}},
			{name:'name',label:'名称', width:150,editable: true,editoptions:{size:"20",maxlength:"30"}},
			{name:'stock',label:'stock', width:70, editable: false,edittype:"checkbox" },
			{name:'ship',label:'ship', width:90, editable: false,edittype:"select",editoptions:{value:"FE:FedEx;IN:InTime;TN:TNT;AR:ARAMEX"}},
			{name:'noteId',label:'noteId', width:60, editable: false},
			{name:'note',label:'note', width:150, sortable:false,editable: true,edittype:"choice", editoptions:{idKey:"noteId"}} 
		], 
		buttons:[{
			id: "btn1",
			name: "新增",
			icon: "a",
			handler:function(){
				bg.addRowData();
			}
		},{
			id:"btn2",
			name:"删除",
			icon: "a",
			handler:function(){
				bg.delRowData();
			}
		},{
			id:"btn2",
			name:"修改",
			icon: "a",
			handler:function(){
				console.info(bg.getChangeList());
			}
		}]
	});
	bg.init();
</script>
</@pui.body>